import{g as e,b as l,c as a}from"./chunk-DsM932Ci.js";import{d as s,c as t,o as u,a as n,g as i,r as o,T as c,K as r,h as d,a_ as f,n as p,a$ as m,i as v,b0 as y}from"./chunk-B1GhtS-6.js";const b={class:"w-full h-full flex flex-col items-center mt-6"},w=["disabled","accept"],x=["src"],h={key:2,class:"w-full h-full flex justify-center items-center flex-col gap-4"},g={key:0,class:"w-full flex items-center justify-between mt-2"},k={class:"max-w-[3/4] truncate text-sm"},j=s({__name:"index",props:{limitType:{},mode:{}},emits:["uploadFile"],setup(s,{emit:j}){const F=s,N=j,_=o(null),T=o(null);async function C(e){const s=e.target.files[0],t=s.type;if("json"===F.mode){const e=await l(s),a=JSON.parse(e);return T.value={data:a,fileName:s.name,type:t},_.value=s.name,void N("uploadFile",T.value)}const{data:u,fileName:n}=await a(s);T.value={data:u,fileName:n,type:t},_.value=n,N("uploadFile",T.value)}function q(){T.value=null,N("uploadFile",null)}return(l,a)=>(u(),t("div",b,[n("input",{id:"file-upload",disabled:null!==T.value,type:"file",class:"w-full bg-red-400/50 max-h-52 cursor-pointer absolute",style:{display:"none"},accept:s.limitType,onChange:C},null,40,w),n("label",{for:"file-upload",class:c([T.value?"cursor-not-allowed":null,"w-full h-52 cursor-pointer border-2 border-dashed flex items-center justify-center overflow-hidden"])},[T.value&&T.value.type.includes("image")?(u(),t("img",{key:0,class:"w-full object-cover stroke-0",src:d(e)(T.value.data),alt:""},null,8,x)):T.value&&T.value.type.includes("audio")?(u(),r(d(f),{key:1,class:"w-2/3 h-2/3 stroke-1 text-gray-500/50"})):(u(),t("div",h,[p(d(m),{class:"w-2/3 h-2/3 stroke-1 text-gray-500/50"}),a[0]||(a[0]=n("span",{class:"btn btn-neutral"},"点击上传",-1))]))],2),T.value?(u(),t("div",g,[n("p",k,v(_.value),1),n("button",{class:"btn btn-xs btn-square btn-ghost",onClick:q},[p(d(y))])])):i("",!0)]))}});export{j as _};
